{
    "name": "OpenShift v9",
    "label": "openshift-v9",
    "description": "OpenShift Extension using Fedora CoreOS and same server type for all instances",
    "definition": {
      "kind": "ExtensionDefinition",
      "schemaVersion": "1.1",
      "name": "OpenShift Platform",
      "label": "openshift",
      "extensionType": "openshift-app",
      "vendor": "MetalSoft",
      "extensionVersion": "1.0",
      "description": "Enables the automatic deployment of openshift clusters. Supported version is from 6.4.",
      "icon": "none",
      "dependencies": {
        "controllerVersion": "6.4+",
        "osTemplates": [
          "centos-9-ocp",
          "rhcos-4-17"
        ]
      },
      "inputs": [
        {
          "label": "admin_node_type",
          "name": "Admin/services node type",
          "inputType": "ExtensionInputServerType",
          "options": {}
        },
        {
          "label": "bootstrap_node_type",
          "name": "Bootstrap node type",
          "inputType": "ExtensionInputServerType",
          "options": {}
        },
        {
          "label": "master_node_type",
          "name": "Master nodes type",
          "inputType": "ExtensionInputServerType",
          "options": {}
        },
        {
          "label": "worker_node_type",
          "name": "Worker nodes type",
          "inputType": "ExtensionInputServerType",
          "options": {}
        },
        {
          "label": "worker_node_count",
          "name": "Worker nodes count",
          "inputType": "ExtensionInputInteger",
          "options": {
            "minValue": 2,
            "maxValue": 100,
            "deniedValues": []
          }
        },
        {
          "label": "ansible_resolver_ips",
          "name": "External DNS resolver",
          "inputType": "ExtensionInputString",
          "options": {}
        },
        {
          "label": "vars_debugging_enabled",
          "name": "Variables debugging enabled",
          "inputType": "ExtensionInputBoolean",
          "options": {}
        }
      ],
      "outputs": [],
      "infrastructure": {
        "instanceArrays": [
          {
            "label": "openshift-admin",
            "instanceCount": "1",
            "serverType": "#/input/admin_node_type",
            "osTemplate": "centos-9-ocp",
            "customVariables": [
              {
                "name": "vars_debugging_enabled",
                "value": "#/input/vars_debugging_enabled"
              },
              {
                "name": "ansible_resolver_ips",
                "value": "#/input/ansible_resolver_ips"
              }
            ]
          },
          {
            "label": "openshift-bootstrap",
            "instanceCount": "1",
            "serverType": "#/input/bootstrap_node_type",
            "osTemplate": "rhcos-4-17",
            "customVariables": [
              {
                "name": "vars_debugging_enabled",
                "value": "#/input/vars_debugging_enabled"
              }
            ]
          },
          {
            "label": "openshift-master",
            "instanceCount": "3",
            "serverType": "#/input/master_node_type",
            "osTemplate": "rhcos-4-17",
            "customVariables": [
              {
                "name": "vars_debugging_enabled",
                "value": "#/input/vars_debugging_enabled"
              }
            ]
          },
          {
            "label": "openshift-worker",
            "instanceCount": "#/input/worker_node_count",
            "serverType": "#/input/worker_node_type",
            "osTemplate": "rhcos-4-17",
            "customVariables": [
              {
                "name": "vars_debugging_enabled",
                "value": "#/input/vars_debugging_enabled"
              }
            ]
          }
        ]
      },
      "assets": [
        {
          "label": "my-ansible-bundle",
          "name": "The OpenShift Ansible bundle",
          "assetType": "AnsibleBundle",
          "url": "https://repo.metalsoft.io/.extensions_ms/openshift.zip"
        }
      ],
      "onCreate": {
        "postDeploy": [
          {
            "label": "createStep",
            "taskType": "ExtensionTaskAnsible",
            "options": {
              "asset": "my-ansible-bundle",
              "playbook": "deploy.yaml"
            }
          }
        ]
      }
    }
  }